<div class="center">
    <form class="example-form" (ngSubmit)="createTrip()" [formGroup]="tripForm">
        <table class="example-full-width" cellspacing="0">
            <tr>
                <div class="example-full-width center">
                    <img src="../../../../assets/images/logologin.png" class="img" alt="Logo Login">
                </div>
            </tr>
            <tr>
                <td>
                    <mat-form-field class="example-full-width">
                        <mat-label>{{'trip.title' | translate}}</mat-label>
                        <input matInput formControlName="title">
                        <mat-error *ngIf="tripForm.controls.title.hasError('required')">
                            {{'validator.required.title' | translate}}
                        </mat-error>
                    </mat-form-field>
                </td>
            </tr>
            <tr>
                <td>
                    <mat-form-field class="example-full-width">
                        <mat-label>{{'trip.description' | translate}}</mat-label>
                        <textarea matInput formControlName="description"></textarea>
                        <mat-error *ngIf="tripForm.controls.description.hasError('required')">
                            {{'validator.required.description' | translate}}
                        </mat-error>
                    </mat-form-field>
                </td>
            </tr>
            <tr>
                <td>
                    <div formArrayName="requirements">
                        <div *ngFor="let req of requirementsList.controls; let i=index">
                            <div [formGroupName]="i">
                                <mat-form-field class="example-full-width">
                                    <mat-label>{{'trip.requirements' | translate}}</mat-label>
                                    <input matInput formControlName="requirement">
                                    <mat-error *ngIf="tripForm.controls.requirements.hasError('required')">
                                        {{'validator.required.requirement' | translate}}
                                    </mat-error>
                                </mat-form-field>
                                <button *ngIf="requirementsList.length > 1" (click)="removeObject('requirements', i)" type="button" class="btn btn-outline-danger">{{'messages.delete' | translate}}</button>
                            </div>
                        </div>
                    </div>
                    <button (click)="addObject('requirements')" type="button" class="btn btn-outline-success">{{'messages.addRequirement' | translate}}</button>
                </td>
            </tr>
            <tr>
                <td>
                    <mat-form-field>
                        <mat-label>{{'trip.start' | translate}}</mat-label>
                        <input matInput readonly [matDatepicker]="pickerStart" [min]="minDateStart" formControlName="start"
                        (dateChange)="onChangeDate($event)" >
                        <mat-datepicker-toggle matSuffix [for]="pickerStart"></mat-datepicker-toggle>
                        <mat-datepicker #pickerStart></mat-datepicker>
                    </mat-form-field>
                    -
                    <mat-form-field>
                        <mat-label>{{'trip.end' | translate}}</mat-label>
                        <input matInput readonly [matDatepicker]="pickerEnd" [min]="minDateEnd" formControlName="end">
                        <mat-datepicker-toggle matSuffix [for]="pickerEnd"></mat-datepicker-toggle>
                        <mat-datepicker #pickerEnd></mat-datepicker>
                    </mat-form-field>
                </td>
            </tr>
            <tr>
                <td>
                    <div>
                        <fieldset>
                            <legend>{{'trip.stages' | translate}}</legend>
                            <div formArrayName="stages">
                                <div *ngFor="let stage of stagesList.controls; let i=index">
                                    <div [formGroupName]="i">
                                        <mat-form-field class="example-full-width">
                                            <mat-label>{{'trip.title' | translate}}</mat-label>
                                            <input matInput formControlName="title">
                                            <mat-error *ngIf="stage.controls.title.hasError('required')">
                                                {{'validator.required.title' | translate}}
                                            </mat-error>
                                        </mat-form-field>
                                        <mat-form-field class="example-full-width">
                                            <mat-label>{{'trip.description' | translate}}</mat-label>
                                            <textarea matInput formControlName="description"></textarea>
                                            <mat-error *ngIf="stage.controls.description.hasError('required')">
                                                {{'validator.required.description' | translate}}
                                            </mat-error>
                                        </mat-form-field>
                                        <mat-form-field class="example-full-width">
                                            <mat-label>{{'trip.price' | translate}}</mat-label>
                                            <input matInput type="number" formControlName="price" class="example-right-align" min="1">
                                            <span matPrefix>â‚¬&nbsp;</span>
                                            <mat-error *ngIf="stage.controls.price.hasError('required')">
                                                {{'validator.required.price' | translate}}
                                            </mat-error>
                                        </mat-form-field>
                                        <button *ngIf="stagesList.length > 1" (click)="removeObject('stages', i)" type="button" class="btn btn-outline-danger">{{'messages.delete' | translate}}</button>
                                    </div>
                                </div>
                            </div>
                            <button (click)="addObject('stages')" type="button" class="btn btn-outline-success">{{'messages.addStage' | translate}}</button>
                        </fieldset>
                    </div>
                </td>
            </tr>
        </table>
        <p>
            <button mat-stroked-button type="submit" [disabled]="!tripForm.valid">{{'messages.createTrip' | translate}}</button>
        </p>
    </form>
</div>